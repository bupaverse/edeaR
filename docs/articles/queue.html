<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Queue Analysis • edeaR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Queue Analysis">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">edeaR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/filters.html">Filters</a>
    </li>
    <li>
      <a href="../articles/metrics.html">Metrics</a>
    </li>
    <li>
      <a href="../articles/queue.html">Queue Analysis</a>
    </li>
    <li>
      <a href="../articles/work_schedules.html">Performance with work schedules</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bupaverse/edeaR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Queue Analysis</h1>
                        <h4 class="author">Gert Janssenswillen</h4>
            
            <h4 class="date">2020-12-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bupaverse/edeaR/blob/master/vignettes/queue.Rmd"><code>vignettes/queue.Rmd</code></a></small>
      <div class="hidden name"><code>queue.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(edeaR)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; Attaching package: 'edeaR'</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; The following object is masked from 'package:base':</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt;     setdiff</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; Attaching package: 'dplyr'</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt; The following objects are masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt;     filter, lag</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt; The following objects are masked from 'package:base':</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co">#&gt;     intersect, setdiff, setequal, union</span></a></code></pre></div>
<div id="calculate-queueing-times" class="section level2">
<h2 class="hasAnchor">
<a href="#calculate-queueing-times" class="anchor"></a>Calculate queueing times</h2>
<p>The function calculate_queueing_times can be used to calculate for each activity instance in the log when it was started, and since when it was queued. (That is, each activity instance except the first one for each case).</p>
<p>For example, for the sepsis event log</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(eventdataR)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; Warning: package 'eventdataR' was built under R version 3.6.3</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="../reference/calculate_queuing_times.html">calculate_queuing_times</a></span>(sepsis) -&gt;<span class="st"> </span>queuing_times</a></code></pre></div>
<p>The result is the following:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">queuing_times</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; # A tibble: 14,164 x 7</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt;    case_id activity activity_instan~ resource started            </span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt;    &lt;chr&gt;   &lt;fct&gt;    &lt;chr&gt;            &lt;fct&gt;    &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt;  1 XJ      ER Tria~ 3835             C        2013-11-07 08:29:18</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt;  2 XJ      ER Seps~ 3836             A        2013-11-07 08:37:32</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;  3 XJ      CRP      3839             B        2013-11-07 08:51:00</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt;  4 XJ      LacticA~ 3837             B        2013-11-07 08:51:00</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;  5 XJ      Leucocy~ 3838             B        2013-11-07 08:51:00</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;  6 XJ      IV Liqu~ 3840             A        2013-11-07 09:05:57</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;  7 XJ      IV Anti~ 3841             A        2013-11-07 10:05:58</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;  8 XJ      Admissi~ 3842             I        2013-11-07 11:11:34</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;  9 XJ      Leucocy~ 3843             B        2013-11-08 08:00:00</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; 10 I       ER Tria~ 106              C        2013-11-09 09:34:28</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt; # ... with 14,154 more rows, and 2 more variables: in_queue_since &lt;dttm&gt;,</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt; #   time_in_queue &lt;dbl&gt;</span></a></code></pre></div>
<p>We can use the output to compare the times time in queue for different activities, for example.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 3.6.3</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 3.6.3</span></a>
<a class="sourceLine" id="cb4-4" title="4">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(activity, time_in_queue)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Or between different resources:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(resource, time_in_queue)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>If we remove the “?” resource:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(resource <span class="op">!=</span><span class="st"> "?"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(resource, time_in_queue)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="calculate-queue-length" class="section level2">
<h2 class="hasAnchor">
<a href="#calculate-queue-length" class="anchor"></a>Calculate queue length</h2>
<p>Based on the information about queuing times, we can also compute the length of the queue. This can be done using the function calculate_queue_length. For this, we need to decide at which time interval we want to compute the length of the queue. For example, we can compute the length of the queue for each day, each week, each month, etc. The sepsis data covers approximately 1.5 years. Computing the queue for each week will thus give us about 75 different observations.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="st">"week"</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt; # A tibble: 83 x 2</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt;    date       queue_length</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt;    &lt;date&gt;            &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt;  1 2013-11-07            0</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt;  2 2013-11-14            5</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt;  3 2013-11-21           11</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt;  4 2013-11-28           15</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt;  5 2013-12-05           17</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt;  6 2013-12-12           19</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt;  7 2013-12-19           21</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;  8 2013-12-26           27</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;  9 2014-01-02           32</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt; 10 2014-01-09           36</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt; # ... with 73 more rows</span></a></code></pre></div>
<p>The first observation is the data above will always be the first timestamp for which an event was recorded. At this point, the queue will always be zero. The second observation is the queue length after one week, etc. We can plot this data to see the evolution of the queue over time.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="st">"week"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, queue_length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Of course, you need to be careful when interpreting both extremes of this time range, because we only have complete cases. At the start of the time range, the process is “building up” activity, and the queue goes up. At the end of the time range, the last cases are being finished, and the queue gradually empties. It takes some knowledge about the data to decide on a time frame that is proper for analysis.</p>
</div>
<div id="by-resource-or-activity" class="section level2">
<h2 class="hasAnchor">
<a href="#by-resource-or-activity" class="anchor"></a>By resource or activity</h2>
<p>The length of the queue shown above refers to all queued activity instances in the process. We can also look at queue length by either activity or by resource. This can be done by changing the level argument in the calculation function.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="st">"week"</span>, <span class="dt">level =</span> <span class="st">"resource"</span>) </a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">#&gt; # A tibble: 258 x 3</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt;    date       resource queue_length</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt;    &lt;date&gt;     &lt;fct&gt;           &lt;int&gt;</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt;  1 2013-11-14 ?                   1</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#&gt;  2 2013-11-14 B                   3</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#&gt;  3 2013-11-14 E                   1</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt;  4 2013-11-21 ?                   4</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt;  5 2013-11-21 B                   6</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#&gt;  6 2013-11-21 E                   1</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt;  7 2013-11-28 ?                   5</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#&gt;  8 2013-11-28 B                   6</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co">#&gt;  9 2013-11-28 E                   3</span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="co">#&gt; 10 2013-11-28 I                   1</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co">#&gt; # ... with 248 more rows</span></a>
<a class="sourceLine" id="cb9-17" title="17">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="st">"week"</span>, <span class="dt">level =</span> <span class="st">"activity"</span>) </a>
<a class="sourceLine" id="cb9-19" title="19"><span class="co">#&gt; # A tibble: 340 x 3</span></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">#&gt;    date       activity     queue_length</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co">#&gt;    &lt;date&gt;     &lt;fct&gt;               &lt;int&gt;</span></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co">#&gt;  1 2013-11-14 CRP                     3</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">#&gt;  2 2013-11-14 Release A               1</span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="co">#&gt;  3 2013-11-14 Return ER               1</span></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="co">#&gt;  4 2013-11-21 CRP                     5</span></a>
<a class="sourceLine" id="cb9-26" title="26"><span class="co">#&gt;  5 2013-11-21 Leucocytes              1</span></a>
<a class="sourceLine" id="cb9-27" title="27"><span class="co">#&gt;  6 2013-11-21 Release A               1</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">#&gt;  7 2013-11-21 Return ER               4</span></a>
<a class="sourceLine" id="cb9-29" title="29"><span class="co">#&gt;  8 2013-11-28 Admission NC            1</span></a>
<a class="sourceLine" id="cb9-30" title="30"><span class="co">#&gt;  9 2013-11-28 CRP                     5</span></a>
<a class="sourceLine" id="cb9-31" title="31"><span class="co">#&gt; 10 2013-11-28 Leucocytes              1</span></a>
<a class="sourceLine" id="cb9-32" title="32"><span class="co">#&gt; # ... with 330 more rows</span></a></code></pre></div>
<p>Again, these can be plotted conveniently (we ignore the unknown resource):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(resource <span class="op">!=</span><span class="st"> "?"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="st">"week"</span>, <span class="dt">level =</span> <span class="st">"resource"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, queue_length, <span class="dt">color =</span> resource)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
<div id="the-impact-of-the-time-interval" class="section level2">
<h2 class="hasAnchor">
<a href="#the-impact-of-the-time-interval" class="anchor"></a>The impact of the time interval</h2>
<p>If we increase the time interval, the queue length is calculated after longer periods of time, so the data becomes more sparse. For example, calculating after a month instead of a week:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(resource <span class="op">!=</span><span class="st"> "?"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="st">"month"</span>, <span class="dt">level =</span> <span class="st">"resource"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, queue_length, <span class="dt">color =</span> resource)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>We can set it to a integer number to indicate an interval of x days. For example, every 3 days:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">queuing_times <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(resource <span class="op">!=</span><span class="st"> "?"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span>(<span class="dt">time_interval =</span> <span class="dv">3</span>, <span class="dt">level =</span> <span class="st">"resource"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, queue_length, <span class="dt">color =</span> resource)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>The time interval should be chosen carefully. Note that a very small interval (the smallest possible is “day”) can be computationally expensive if your event log covers a long time period.</p>
</div>
<div id="some-important-remarks---caution-needed" class="section level2">
<h2 class="hasAnchor">
<a href="#some-important-remarks---caution-needed" class="anchor"></a>Some important remarks - caution needed!</h2>
<p>The calculations of queues is based on some assumptions that are important to understand when drawing conclusions about these numbers.</p>
<p>Firstly, it starts from the log, and nothing more. It does not take any process model notion into account. We assume that an activity instance could have started if the previous one was finished. However, if the activity in question and the previous one can be executed in parallel, the activity in question could have been started earlier, and thus we underestimate its time in the queue.</p>
<p>Relatedly, if the activity in question actually overlaps with the previous one, you will get a negative queue time, because following the above theory, it started to early. (Of course, this can only happen when you have start and end events). The current implemention does not notify you if this happens, but could check for it in the result of the queueing times, and decide how to handle it (e.g. remove with zero or NA).</p>
<p>Secondly, there might be other factors, which are not present in the data, that impact when something starts to queue or not. If somewhere between two activities a decision is made on how to proceed with the case, the queueing of the second activity didn’t really start after the first, but after the decision was made.</p>
<p>Finally, an important remark should be made regarding the resource. If we compute the queue length of a resource, as shown above, all the activities that this resouces executed are added to the queue once the previous activity instance was finished. This might not accurately represent reality, because it assume that executions are assigned to a resource queue up-front, i.e. once they are enabled (taking into account the previous two points on the heuristic we use to define that moment), and not at a latter stage. It might for instance be the situation that queued cases are added to a queue that is not necessarily tied to a single resource, but from which resources can pick a task once they are free to start some (or at any point in time between the task being added to the list, and the task being started).</p>
<p>Because of these reasons, some caution is necessary when analysing queuing times and length, as the heuristic, solely based on the avaiable process data does not take into account a process/workflow or the context of task assignment.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#calculate-queueing-times">Calculate queueing times</a></li>
      <li><a href="#calculate-queue-length">Calculate queue length</a></li>
      <li><a href="#by-resource-or-activity">By resource or activity</a></li>
      <li><a href="#the-impact-of-the-time-interval">The impact of the time interval</a></li>
      <li><a href="#some-important-remarks---caution-needed">Some important remarks - caution needed!</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Gert Janssenswillen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
