<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="edeaR">
<title>Queue Analysis • edeaR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Queue Analysis">
<meta property="og:description" content="edeaR">
<meta property="og:image" content="https://bupaverse.github.io/edeaR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">edeaR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/filters.html">Filters</a>
    <a class="dropdown-item" href="../articles/metrics.html">Metrics</a>
    <a class="dropdown-item" href="../articles/queue.html">Queue Analysis</a>
    <a class="dropdown-item" href="../articles/work_schedules.html">Performance with work schedules</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://bupar.net/2022/07/27/bupar-0-5-0-whats-new/">edeaR 0.9.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bupaverse/edeaR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Queue Analysis</h1>
                        <h4 data-toc-skip class="author">Gert Janssenswillen</h4>
            
            <h4 data-toc-skip class="date">2022-09-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bupaverse/edeaR/blob/HEAD/vignettes/queue.Rmd" class="external-link"><code>vignettes/queue.Rmd</code></a></small>
      <div class="d-none name"><code>queue.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bupar.net/" class="external-link">edeaR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'edeaR'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     setdiff</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="section level2">
<h2 id="calculate-queueing-times">Calculate queueing times<a class="anchor" aria-label="anchor" href="#calculate-queueing-times"></a>
</h2>
<p>The function calculate_queueing_times can be used to calculate for each activity instance in the log when it was started, and since when it was queued. (That is, each activity instance except the first one for each case).</p>
<p>For example, for the sepsis event log</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bupar.net/" class="external-link">eventdataR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/calculate_queuing_times.html">calculate_queuing_times</a></span><span class="op">(</span><span class="va">sepsis</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">queuing_times</span></span></code></pre></div>
<p>The result is the following:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 14,164 × 7</span></span></span>
<span><span class="co">#&gt;    case_id activity      activ…¹ resou…² started             in_queue_since     </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> XJ      ER Triage     3835    C       2013-11-07 <span style="color: #949494;">08:29:18</span> 2013-11-07 <span style="color: #949494;">08:18:29</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> XJ      ER Sepsis Tr… 3836    A       2013-11-07 <span style="color: #949494;">08:37:32</span> 2013-11-07 <span style="color: #949494;">08:29:18</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> XJ      CRP           3839    B       2013-11-07 <span style="color: #949494;">08:51:00</span> 2013-11-07 <span style="color: #949494;">08:37:32</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> XJ      LacticAcid    3837    B       2013-11-07 <span style="color: #949494;">08:51:00</span> 2013-11-07 <span style="color: #949494;">08:51:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> XJ      Leucocytes    3838    B       2013-11-07 <span style="color: #949494;">08:51:00</span> 2013-11-07 <span style="color: #949494;">08:51:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> XJ      IV Liquid     3840    A       2013-11-07 <span style="color: #949494;">09:05:57</span> 2013-11-07 <span style="color: #949494;">08:51:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> XJ      IV Antibioti… 3841    A       2013-11-07 <span style="color: #949494;">10:05:58</span> 2013-11-07 <span style="color: #949494;">09:05:57</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> XJ      Admission NC  3842    I       2013-11-07 <span style="color: #949494;">11:11:34</span> 2013-11-07 <span style="color: #949494;">10:05:58</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> XJ      Leucocytes    3843    B       2013-11-08 <span style="color: #949494;">08:00:00</span> 2013-11-07 <span style="color: #949494;">11:11:34</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> I       ER Triage     106     C       2013-11-09 <span style="color: #949494;">09:34:28</span> 2013-11-09 <span style="color: #949494;">09:21:03</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 14,154 more rows, 1 more variable: time_in_queue &lt;drtn&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​activity_instance_id, ²​resource</span></span></span></code></pre></div>
<p>We can use the output to compare the times time in queue for different activities, for example.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 3.6.3</span></span>
<span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">activity</span>, <span class="va">time_in_queue</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Don't know how to automatically pick scale for object of type difftime. Defaulting to continuous.</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Or between different resources:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">resource</span>, <span class="va">time_in_queue</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Don't know how to automatically pick scale for object of type difftime. Defaulting to continuous.</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>If we remove the “?” resource:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">resource</span> <span class="op">!=</span> <span class="st">"?"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">resource</span>, <span class="va">time_in_queue</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Don't know how to automatically pick scale for object of type difftime. Defaulting to continuous.</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="calculate-queue-length">Calculate queue length<a class="anchor" aria-label="anchor" href="#calculate-queue-length"></a>
</h2>
<p>Based on the information about queuing times, we can also compute the length of the queue. This can be done using the function calculate_queue_length. For this, we need to decide at which time interval we want to compute the length of the queue. For example, we can compute the length of the queue for each day, each week, each month, etc. The sepsis data covers approximately 1.5 years. Computing the queue for each week will thus give us about 75 different observations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 83 × 2</span></span></span>
<span><span class="co">#&gt;    date       queue_length</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-11-07            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-11-14            5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-11-21           11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-11-28           15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-12-05           17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-12-12           19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-12-19           21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-12-26           27</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-01-02           32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-01-09           36</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 73 more rows</span></span></span></code></pre></div>
<p>The first observation is the data above will always be the first timestamp for which an event was recorded. At this point, the queue will always be zero. The second observation is the queue length after one week, etc. We can plot this data to see the evolution of the queue over time.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">queue_length</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Of course, you need to be careful when interpreting both extremes of this time range, because we only have complete cases. At the start of the time range, the process is “building up” activity, and the queue goes up. At the end of the time range, the last cases are being finished, and the queue gradually empties. It takes some knowledge about the data to decide on a time frame that is proper for analysis.</p>
</div>
<div class="section level2">
<h2 id="by-resource-or-activity">By resource or activity<a class="anchor" aria-label="anchor" href="#by-resource-or-activity"></a>
</h2>
<p>The length of the queue shown above refers to all queued activity instances in the process. We can also look at queue length by either activity or by resource. This can be done by changing the level argument in the calculation function.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="st">"week"</span>, level <span class="op">=</span> <span class="st">"resource"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 258 × 3</span></span></span>
<span><span class="co">#&gt;    date       resource queue_length</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-11-14 ?                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-11-14 B                   3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-11-14 E                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-11-21 ?                   4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-11-21 B                   6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-11-21 E                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-11-28 ?                   5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-11-28 B                   6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-11-28 E                   3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-11-28 I                   1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 248 more rows</span></span></span>
<span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="st">"week"</span>, level <span class="op">=</span> <span class="st">"activity"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 340 × 3</span></span></span>
<span><span class="co">#&gt;    date       activity     queue_length</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-11-14 CRP                     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-11-14 Release A               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-11-14 Return ER               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-11-21 CRP                     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-11-21 Leucocytes              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-11-21 Release A               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-11-21 Return ER               4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-11-28 Admission NC            1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-11-28 CRP                     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-11-28 Leucocytes              1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 330 more rows</span></span></span></code></pre></div>
<p>Again, these can be plotted conveniently (we ignore the unknown resource):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">resource</span> <span class="op">!=</span> <span class="st">"?"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="st">"week"</span>, level <span class="op">=</span> <span class="st">"resource"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">queue_length</span>, color <span class="op">=</span> <span class="va">resource</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="the-impact-of-the-time-interval">The impact of the time interval<a class="anchor" aria-label="anchor" href="#the-impact-of-the-time-interval"></a>
</h2>
<p>If we increase the time interval, the queue length is calculated after longer periods of time, so the data becomes more sparse. For example, calculating after a month instead of a week:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">resource</span> <span class="op">!=</span> <span class="st">"?"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="st">"month"</span>, level <span class="op">=</span> <span class="st">"resource"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">queue_length</span>, color <span class="op">=</span> <span class="va">resource</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>We can set it to a integer number to indicate an interval of x days. For example, every 3 days:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queuing_times</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">resource</span> <span class="op">!=</span> <span class="st">"?"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/calculate_queuing_length.html">calculate_queuing_length</a></span><span class="op">(</span>time_interval <span class="op">=</span> <span class="fl">3</span>, level <span class="op">=</span> <span class="st">"resource"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">queue_length</span>, color <span class="op">=</span> <span class="va">resource</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="queue_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>The time interval should be chosen carefully. Note that a very small interval (the smallest possible is “day”) can be computationally expensive if your event log covers a long time period.</p>
</div>
<div class="section level2">
<h2 id="some-important-remarks---caution-needed">Some important remarks - caution needed!<a class="anchor" aria-label="anchor" href="#some-important-remarks---caution-needed"></a>
</h2>
<p>The calculations of queues is based on some assumptions that are important to understand when drawing conclusions about these numbers.</p>
<p>Firstly, it starts from the log, and nothing more. It does not take any process model notion into account. We assume that an activity instance could have started if the previous one was finished. However, if the activity in question and the previous one can be executed in parallel, the activity in question could have been started earlier, and thus we underestimate its time in the queue.</p>
<p>Relatedly, if the activity in question actually overlaps with the previous one, you will get a negative queue time, because following the above theory, it started to early. (Of course, this can only happen when you have start and end events). The current implemention does not notify you if this happens, but could check for it in the result of the queueing times, and decide how to handle it (e.g. remove with zero or NA).</p>
<p>Secondly, there might be other factors, which are not present in the data, that impact when something starts to queue or not. If somewhere between two activities a decision is made on how to proceed with the case, the queueing of the second activity didn’t really start after the first, but after the decision was made.</p>
<p>Finally, an important remark should be made regarding the resource. If we compute the queue length of a resource, as shown above, all the activities that this resouces executed are added to the queue once the previous activity instance was finished. This might not accurately represent reality, because it assume that executions are assigned to a resource queue up-front, i.e. once they are enabled (taking into account the previous two points on the heuristic we use to define that moment), and not at a latter stage. It might for instance be the situation that queued cases are added to a queue that is not necessarily tied to a single resource, but from which resources can pick a task once they are free to start some (or at any point in time between the task being added to the list, and the task being started).</p>
<p>Because of these reasons, some caution is necessary when analysing queuing times and length, as the heuristic, solely based on the avaiable process data does not take into account a process/workflow or the context of task assignment.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Gert Janssenswillen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
